<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <title>{% block title %}Constitution!{% endblock %}</title>

    {% block stylesheets %}
      <link rel="stylesheet" href="{{asset('build/layout.css')}}">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"/>
    {% endblock %}

</head>
<body>

{% block header %}
  <div class="ui stackable top fixed menu">
      <div class="item menu-logo menu-item">
          <a href="{{ path('index') }}" data-toggle="tooltip" data-placement="bottom" title="Créez votre Constitution">Constitution</a>
      </div>
        {% if app.user %}
           {% if app.session.get('partieCourante') is not null %}
           <div class="item menu-item">
               <a href="{{ path('partie_show', {'id':app.session.get('partieCourante').id}) }}">Partie en cours : {{app.session.get('partieCourante').nom}}</a>
           </div>
           <div class="item menu-item">
               <a href="{{ path('partie_liste') }}">Changer de partie</a>
           </div>
           {% endif %}
        {% endif %}
        {% if not app.user %}
        <div class="item menu-item">
           <a href="{{ path('login') }}">Login</a>
        </div>
        {% endif %}
      <div class="right menu">
      <div class="item menu-item">
          {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
              <ul class="nav navbar-nav navbar-right">
                  <li class="drop-down">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="fa fa-user"></span> <strong>{{ app.user.username }}</strong> <span class="caret"></span></a>
                      <ul class="dropdown-menu">
                          <li>
                              <a href="{{ path('partie_new') }}">
                                  <span class="fa fa-child"></span>
                                  Nouvelle partie
                          </li>
                          <li>
                              <a href="{{ path('logout') }}">
                                  <span class="fa fa-sign-out"></span>
                                  Se déconnecter
                              </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          {% else %}
              <ul class="nav navbar-nav navbar-right">
                  <li>
                      <a href="{{ path('user_registration') }}">
                          S'enregistrer
                      </a>
                  </li>
              </ul>
          {% endif %}

      </div>
    </div>
      <!--/.navbar-collapse -->
  </div>
{% endblock %}

<div class="container-fluid text-center">
  <div class="row content">
    {% block leftmenu %}
      <div class="col-sm-2 sidenav">
      </div>
    {% endblock %}
    {% for type, messages in app.session.flashbag.all() %}
      {% for message in messages %}
          <div class="flash-{{ type }} alert alert-info">
              {{ message }}
          </div>
      {% endfor %}
    {% endfor %}
    <div class="col-sm-8 text-left">
      {% block body %}
      {% endblock %}
    </div>
    {% block rightmenu %}
    <div class="col-sm-2 sidenav">
    </div>
    {% endblock %}
  </div>
</div>
{% block footer %}
<footer class="container-fluid text-center">
  <p>Serious game by Voots</p>
</footer>
{% endblock %}

{% block javascripts %}
  <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
  <script src="{{ path('fos_js_routing_js', { callback: 'fos.Router.setData' }) }}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.0.5/es6-promise.auto.min.js"></script>
  <script src="{{ asset('build/manifest.js') }}"></script>
  <script src="{{ asset('build/layout.js') }}"></script>
{% endblock %}

</body>
</html>
